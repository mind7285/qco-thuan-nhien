# ğŸ‡»ğŸ‡³ Makefile cho TN POS System Flutter
# ğŸ‡ºğŸ‡¸ Makefile for TN POS System Flutter

.PHONY: setup run build clean deps gen

# Default target
.DEFAULT_GOAL := setup

# Setup project (install deps + generate code)
setup: deps gen
	@echo "âœ… Setup complete!"

# Install dependencies
deps:
	@echo "ğŸ“¦ Installing dependencies..."
	@flutter pub get
	@echo "âœ… Dependencies installed"

# Generate code (Freezed, Riverpod)
gen:
	@echo "ğŸ”¨ Generating code..."
	@dart run build_runner build --delete-conflicting-outputs
	@echo "âœ… Code generated"

# Clean generated files
clean:
	@echo "ğŸ§¹ Cleaning generated files..."
	@dart run build_runner clean
	@flutter clean
	@echo "âœ… Clean complete"

# Run app
run:
	@echo "ğŸš€ Running Flutter app..."
	@flutter run

# Run on specific device
run-device:
	@echo "ğŸ“± Available devices:"
	@flutter devices
	@echo "ğŸš€ Run: flutter run -d <device_id>"

# Build APK
build-apk:
	@echo "ğŸ”¨ Building APK..."
	@flutter build apk
	@echo "âœ… APK built: build/app/outputs/flutter-apk/app-release.apk"

# Build iOS (macOS only)
build-ios:
	@echo "ğŸ”¨ Building iOS..."
	@flutter build ios
	@echo "âœ… iOS built"

# Analyze code
analyze:
	@echo "ğŸ” Analyzing code..."
	@flutter analyze

# Format code
fmt:
	@echo "ğŸ“ Formatting code..."
	@dart format .

# Watch mode for code generation
watch:
	@echo "ğŸ‘€ Watching for changes..."
	@dart run build_runner watch --delete-conflicting-outputs

